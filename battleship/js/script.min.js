var view={displayMessage:function(e){document.getElementById("messageArea").innerHTML=e},displayHit:function(e){document.getElementById(e).setAttribute("class","hit")},displayMiss:function(e){document.getElementById(e).setAttribute("class","miss")}},model={boardSize:7,numShips:3,shipLength:3,shipsSunk:0,ships:[{locations:["06","16","26"],hits:["","",""]},{locations:["24","34","44"],hits:["","",""]},{locations:["10","11","12"],hits:["","",""]}],fire:function(e){for(var s=0;s<this.numShips;s++){var i=this.ships[s],t=i.locations.indexOf(e);if(t>=0)return i.hits[t]="hit",view.displayHit(e),view.displayMessage("Якорь вам в глотку!!! Попал!!!"),this.isSunk(i)&&(view.displayMessage("Три тысячи чертей на румбу!!! Палубные крысы разбегаются по шлюпкам!!! Корабль тонет!!!"),this.shipsSunk++),!0}return view.displayMiss(e),view.displayMessage("Чтоб проклятый осьминог выпил весь ром в твоих кишках!!! Всю жизнь будешь палубу драить!!! Мимо!"),!1},isSunk:function(e){for(var s=0;s<this.shipLength;s++)if("hit"!==e.hits[s])return!1;return!0}},controller={guesses:0,processGuess:function(e){var s=parseGuess(e);s&&(this.guesses++,model.fire(s)&&model.shipsSunk===model.numShips&&view.displayMessage("Девятый вал валит наповал. Все корабли отправились кормить рыб! Победа!!! Колличество выстрелов "+this.guesses))}};function parseGuess(e){if(null===e||2!==e.length)alert("Или ноль или больше двух");else{var s=["a","b","c","d","e","f","g"].indexOf(e.charAt(0)),i=e.charAt(1);if(isNaN(s)||isNaN(i))alert("Палундра!!! С числами косяк");else{if(!(s<0||s>=model.boardSize||i<0||i>=model.boardSize))return s+i;alert("Нет таких значений")}}return null}function init(){document.getElementById("fireButton").onclick=handleFireButton,document.getElementById("guessInput").onkeypress=handleKeyPress}function handleKeyPress(e){var s=document.getElementById("fireButton");if(13===e.keyCode)return s.click(),!1}function handleFireButton(){var e=document.getElementById("guessInput"),s=e.value;controller.processGuess(s),e.value=""}window.onload=init;